<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestionale Biblioteca</title>
  <style>
    /* ===== BASE ===== */
    body {
      margin: 0px;
      padding: 0px;
      border: 0px;
      font-family: sans-serif;
      font-size: large;
      text-align: center;
    }

/*===== DESIGN MENU DI NAVIGAZIONE =====*/
    .menù {
      list-style: none;
      margin: 0px;
      padding: 0px;
      display: flex;
      justify-content: flex-start;
      background-color: black;
      color: white;
    }

    .menù li a {
      display: block;
      text-decoration: none;
      color: white;
      padding: 15px 25px;
    }
   
   nav {
    position: sticky;
    top: 0;
   }

    .under-menù {
      background-color: orangered;
      margin: 0px;
      padding: 20px;
      border: 0px;
      color: white;
      font-style: italic;
      text-align: center;
      letter-spacing: 2px;
    }
/*===== FINE MENU NAVIGZIONE =====*/

/*===== DESIGN DEL FORM =====*/
    .title-form {
      text-align: center;
    }
    
    form {
      max-width: 1000px;
      text-align: center;
      margin: 10px 250px;
      padding: 5px;
      border: 2px solid black;
      background-color: rgba(201, 200, 200, 0.837);
      border-radius: 10px;
    }

    label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
      text-align: center;
    }

    input {
      width: 80%;
      padding: 5px;
      border: 1px solid #999;
      border-radius: 4px;
      font-size: 20px;
    }

    label, input {
      margin: 5px;
    }

    /*DESIGN BOTTONI*/

    button, .btnRicerca {
    cursor: pointer;
    background-color: white;
    color: orangered;
    border: solid orangered 1px;
    border-radius: 5px;
    padding: 5px;
   }
   form button:hover, .btnRicerca:hover {
    border: solid blue 1px;
    background-color: rgba(0, 183, 255, 0.851);
    color: blue;
   }
  
/*===== CATALOGO DI BASE =====*/

    .catalogo-base {
      text-align: center;
    }
   .catalogo-base ul {
    list-style-type: none;
    padding: 0px;
    text-align: center;
    white-space: 1px;
   }

   .catalogo-base button {
    background: none;
    border: none;
    color: red;
    font-size: 1.5rem;
    cursor: pointer;
    }

  </style>
</head>
<body>
<nav>
 <ul class="menù">
  <li><a href="#">Login</a></li>
  <li><a href="">Lingua ▼</a></li>
 </ul> 
</nav>  

<div class="under-menù">
  <h2>Catalogo del servizio bibliotecario online</h2>
</div>

<div class="title-form">
  <h1>Gestione Biblioteca Virtuale</h1>
</div>

  <main>
    <form id="form-libri">
      <h2>Aggiungi libro</h2>

      <div>
        <label for="titolo">Titolo:</label>
        <input id="titolo" type="text" placeholder="La rabbia e l'Orgoglio" required>
      </div>

      <div>
        <label for="autore">Autore:</label>
        <input id="autore" type="text" placeholder="Oriana Fallaci" required>
      </div>

      <div>
        <label for="argomento">Argomento:</label>
        <input id="argomento" type="text" placeholder="Saggio" required>
      </div>

      <div>
        <label for="editore">Editore:</label>
        <input id="editore" type="text" placeholder="Rizzoli" required>
      </div>

      <div>
        <label for="anno">Anno di pubblicazione:</label>
        <input id="anno" type="number" placeholder="2002" required>
      </div>

      <div>
        <label for="dewey">Codice sistema Dewey:</label>
        <input id="dewey" type="text" placeholder="320" required>
      </div>

      <div>
        <button class="btn" type="submit">Aggiungi libro</button>
        <button type="reset">Elimina</button>
      </div>
    </form>
  </main>


  <div>
    <h2>Cerca per titolo:</h2>
    <input type="text" id="ricerca" placeholder="es. Il prezzo della pace. Quando finisce una guerra">
    <button class="btnRicerca" onclick="cercaLibro()">Cerca</button>
    <p id="risultatoRicerca"></p>
  </div>

  <div class="catalogo-base">
    <h2>Catalogo:</h2>
    <ul id="catalogo"></ul>
  </div>

  <script>
    // COSTRUTTORE LIBRO
    class Libro {
      constructor(titolo, autore, argomento, editore, anno, dewey) {
        this.titolo = titolo;
        this.autore = autore;
        this.argomento = argomento;
        this.editore = editore;
        this.anno = anno;
        this.dewey = dewey;
      }
    }

    // Catalogo di base
    let catalogoBase = [
      new Libro('Il prezzo della pace. Quando finisce una guerra','Paolo Mieli', 'Storia','Rizzoli','2025','970'),
      new Libro('Elogio dell ignoranza e dell errore','Gianrico Carofiglio','Saggio','Einaudi','2025','170'),
      new Libro('Mare aperto. Storia umana del Mediterraneo centrale','Luca Misculin','Storia','IBS','2025','909'),
      new Libro('L inganno dei confini. Come la geografia governa il mondo','Simone Guida','Geopolitica','IBS','2025','320'),
      new Libro('Ucraina, Russia e Nato in poche parole','Marco Travaglio','Geopolitica','IBS','2024','320'),
      new Libro('Russia. Storia di un impero eurasiatico','Aldo Ferrari','Storia','Mondadori','2024','947'),
      new Libro('La Repubblica sotto processo. Storia giudiziaria della politica italiana 1994–2023',' Goffredo Buccini','Politica','Non specificata','2023','300'),
      new Libro('Israele e i palestinesi in poche parole','Marco Travaglio','Storia','PaperFirs','2023','956'),
      new Libro('Quando eravamo i padroni del mondo. Roma: l impero infinito','Aldo Cazzullo','Storia','Harper Collins','2023','937'),
      new Libro('Fascisti della parola','Vittorio Feltri','Politica','Rizzoli','2023','324'),
    ];

    // Caricamento catalogo
    let catalogo = JSON.parse(localStorage.getItem("catalogo")) || catalogoBase;

    // Funzione per mostrare catalogo
    function mostraCatalogo() {
      const ul = document.getElementById("catalogo");
      ul.innerHTML = "";
      catalogo.forEach((libro, index) => {
        ul.innerHTML += `
          <li>
            ${libro.titolo} - ${libro.autore} (${libro.anno}) [${libro.argomento}] [${libro.editore}] [${libro.dewey}]
            <button onclick="eliminaLibro(${index})">❌</button>
          </li>
        `;
      });
    }

    mostraCatalogo();

    // Elimina libro
    function eliminaLibro(index) {
      if (confirm("Vuoi davvero eliminare questo libro?")) {
        catalogo.splice(index, 1);
        localStorage.setItem("catalogo", JSON.stringify(catalogo));
        mostraCatalogo();
      }
    }

    // Aggiungere un nuovo libro dal form
    document.getElementById("form-libri").addEventListener("submit", function(event){
      event.preventDefault();

      const titolo = document.getElementById("titolo").value;
      const autore = document.getElementById("autore").value;
      const argomento = document.getElementById("argomento").value;
      const editore = document.getElementById("editore").value;
      const anno = document.getElementById("anno").value;
      const dewey = document.getElementById("dewey").value;

      const nuovoLibro = new Libro(titolo, autore, argomento, editore, anno, dewey);
      catalogo.push(nuovoLibro);

      localStorage.setItem("catalogo", JSON.stringify(catalogo));
      mostraCatalogo();
      this.reset();
    });

    // Funzione di ricerca per titolo
    function cercaLibro() {
      let testoCercato = document.getElementById("ricerca").value;
      let risultato = document.getElementById("risultatoRicerca");

      let libroTrovato = null;

      for (let i = 0; i < catalogo.length; i++) {
        if (catalogo[i].titolo === testoCercato) {
          libroTrovato = catalogo[i];
        }
      }

      if (libroTrovato !== null) {
        risultato.innerText =
          "Titolo: " + libroTrovato.titolo +
          " | Autore: " + libroTrovato.autore +
          " | Codice Dewey: " + libroTrovato.dewey;
      } else {
        risultato.innerText = "Testo non trovato nel catalogo";
      }
    }
  </script>
</body>
</html>
